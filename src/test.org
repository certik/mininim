#+TITLE: MININIM Test
#+PROPERTY: header-args :noweb no-export :comments noweb
* COMMENT Copyright Notice
  Copyright (C) Bruno FÃ©lix Rezende Ribeiro <oitofelix@gnu.org>

  This program is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation; either version 3, or (at your option)
  any later version.

  This program is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see
  <http://www.gnu.org/licenses/>.

* Tangle
** =test.h=

   #+NAME: test.h
   #+BEGIN_SRC c :tangle test.h
     #ifndef MININIM_TEST_H
     #define MININIM_TEST_H
     #include "mininim.h"
     <<h_inc>>
     <<h_mac>>
     <<h_exp_data>>
     <<h_exp_func>>
     #endif
   #+END_SRC

** =test.c=

   #+NAME: test.c
   #+BEGIN_SRC c :tangle test.c
     #include "mininim.h"
     <<c_inc>>
     <<c_mac>>
     <<c_proto>>
     <<c_priv_data>>
     <<c_pub_data>>
     <<c_priv_func>>
     <<c_pub_func>>
   #+END_SRC

* ~test~

  #+BEGIN_SRC c :noweb-ref c_pub_func
    void
    test ()
    {
      run_test (tolower_str_TEST);
    }
  #+END_SRC

  #+BEGIN_SRC c :noweb-ref c_mac
    #define run_test(t) \
      fprintf (stderr, "Running `%s'...\n", STR(t)); \
      t ();
  #+END_SRC

  #+BEGIN_SRC c :noweb-ref h_exp_func
    extern void test ();
  #+END_SRC
